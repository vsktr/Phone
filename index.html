<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accelerometer Test</title>
<style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    button { padding: 12px 20px; font-size: 16px; margin: 15px; }
    .data-box { font-size: 20px; margin: 15px; padding: 10px; border: 1px solid #ccc; }
</style>
</head>
<body>

<h2>Phone Accelerometer Reader</h2>
<button onclick="enableSensors()">Enable Motion</button>
<div class="data-box" id="accel">Accelerometer: waiting...</div>
<div class="data-box" id="orient">Orientation: waiting...</div>

<script>
function enableSensors() {
    // iOS Safari requires explicit permission
    if (typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission().then(response => {
            if (response === 'granted') {
                startListeners();
            } else {
                alert('Permission denied for motion sensors.');
            }
        }).catch(console.error);
    } else {
        // Android / desktop browsers
        startListeners();
    }
}

function startListeners() {
    window.addEventListener('devicemotion', event => {
        let x = event.accelerationIncludingGravity.x?.toFixed(2) || 0;
        let y = event.accelerationIncludingGravity.y?.toFixed(2) || 0;
        let z = event.accelerationIncludingGravity.z?.toFixed(2) || 0;
        document.getElementById('accel').innerText = `Accelerometer:\nX: ${x}, Y: ${y}, Z: ${z}`;
    });

    window.addEventListener('deviceorientation', event => {
        let alpha = event.alpha?.toFixed(2) || 0;
        let beta = event.beta?.toFixed(2) || 0;
        let gamma = event.gamma?.toFixed(2) || 0;
        document.getElementById('orient').innerText = `Orientation:\nα: ${alpha}, β: ${beta}, γ: ${gamma}`;
    });
}
</script>

</body>
</html>
